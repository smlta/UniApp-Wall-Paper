{"version":3,"file":"classfiyList.js","sources":["pages/classfiyList/classfiyList.vue","D:/Hbuilder/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2xhc3NmaXlMaXN0L2NsYXNzZml5TGlzdC52dWU"],"sourcesContent":["<script setup>\n import {ref} from 'vue'\r\n import {getCategoryList} from '@/API/api.js'\r\n import {onLoad,onReachBottom} from '@dcloudio/uni-app'\r\n const noData = ref(false)\r\n const query = {\r\n\t classid: '',\r\n\t name: '',\r\n\t pageSize:12,\r\n\t pageNum:1\r\n } //查询参数对象\r\n  const categoryList = ref([]) //壁纸列表\r\n onLoad((e) => {\r\n\t const {_id=null,name=null} = e //解构传递的分类id和分类名字\r\n\t  query.classid = _id\r\n\t  query.name = name\r\n\t uni.setNavigationBarTitle({\r\n\t \ttitle:name\r\n\t })\r\n\t getSomeWallList() //因为setup钩子比onload钩子先执行,所以需要在onload里发起请求获取数据,\r\n\t                        //如果在setup里发起请求,会导致发起请求时,参数对象未被赋值导致classid为空\t \r\n }) //页面加载时获取name设置导航栏标题,初始化参数对象发起请求(onload),获取数据渲染\r\n onReachBottom(() => {\r\n\t if(noData.value) return\r\n\t query.pageNum++\r\n\t getSomeWallList()\r\n })\r\n \r\n const getSomeWallList = async () => {\r\n\t const {data:{data}} = await getCategoryList(query)\r\n\t categoryList.value = [...categoryList.value,...data]\r\n\t if(query.pageSize > data.length)\r\n\t {\r\n\t\t noData.value = true\r\n\t } //如果当前获取的数据不足一页,说明是最后一页再次触底时不再发起请求\r\n\t \r\n } //获取某分类的所有壁纸\r\n \n</script>\n\n<template>\r\n\t\r\n\t\n<view class=\"classifylist\">\r\n\t<view class=\"loadingLayout\" v-if=\"!categoryList.length&&!noData\"> <!--刚进入页面显示加载框-->\r\n\t\t<uni-load-more status=\"loading\"></uni-load-more>\r\n\t</view>\r\n <view class=\"content\">\r\n  <navigator class=\"item\" v-for=\"item in categoryList\" :key=\"item._id\" url=\"/pages/preview/preview\">\r\n   <image :src=\"item.smallPicurl\"></image>\r\n  </navigator>\r\n </view>\r\n</view>\n<view class=\"loadingLayout\" v-if=\"categoryList.length || noData\"> \r\n\t\t<!--这里categoryList的作用是当进入页面时先不显示加载组件,当数组不为空时才显示加载组件-->\r\n\t\t<!--如果等待一会后API返回空数组,即没有更多数据也会显示加载组件-->\r\n\t\t<uni-load-more :status=\"noData?'noMore':'loading'\"></uni-load-more> <!--如果没有更多数据就显示'没有更多数据'-->\r\n\t</view>\n</template>\n\n<style lang=\"scss\" scoped>\n.classifylist {\r\n\t\r\n\t.content {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: repeat(3,1fr);\r\n\t\tgap: 5rpx;\r\n\t\tpadding: 5rpx;\r\n\t\t.item {\r\n\t\t\theight: 440rpx;\r\n\t\t\tdisplay: block;\r\n\t\t\timage {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\n</style>\n","import MiniProgramPage from 'C:/Users/林家明/Desktop/前端文件/UniappCode/wall-paper/pages/classfiyList/classfiyList.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","uni","onReachBottom","getCategoryList"],"mappings":";;;;;;;;;;;;;;AAIC,UAAM,SAASA,cAAG,IAAC,KAAK;AACxB,UAAM,QAAQ;AAAA,MACb,SAAS;AAAA,MACT,MAAM;AAAA,MACN,UAAS;AAAA,MACT,SAAQ;AAAA,IACR;AACA,UAAM,eAAeA,cAAG,IAAC,EAAE;AAC5BC,kBAAM,OAAC,CAAC,MAAM;AACb,YAAM,EAAC,MAAI,MAAK,OAAK,KAAI,IAAI;AAC5B,YAAM,UAAU;AAChB,YAAM,OAAO;AACdC,oBAAAA,MAAI,sBAAsB;AAAA,QACzB,OAAM;AAAA,MACT,CAAG;AACD,sBAAiB;AAAA,IAEnB,CAAE;AACDC,kBAAAA,cAAc,MAAM;AACnB,UAAG,OAAO;AAAO;AACjB,YAAM;AACN,sBAAiB;AAAA,IACnB,CAAE;AAED,UAAM,kBAAkB,YAAY;AACnC,YAAM,EAAC,MAAK,EAAC,KAAI,EAAC,IAAI,MAAMC,QAAe,gBAAC,KAAK;AACjD,mBAAa,QAAQ,CAAC,GAAG,aAAa,OAAM,GAAG,IAAI;AACnD,UAAG,MAAM,WAAW,KAAK,QACzB;AACC,eAAO,QAAQ;AAAA,MACf;AAAA,IAED;;;;;;;;;;;;;;;;;;;;;;;;;ACnCF,GAAG,WAAW,eAAe;"}
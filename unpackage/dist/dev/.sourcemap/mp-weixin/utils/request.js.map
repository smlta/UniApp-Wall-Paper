{"version":3,"file":"request.js","sources":["utils/request.js"],"sourcesContent":["//封装公用请求方法\r\nexport const request = (config={}) => {\r\n\tconst BASE_URL = 'https://tea.qingnian8.com/api/bizhi' //基地址\r\n\tlet {url,header= {},method=\"GET\",data={}} = config //解构配置对象,header默认为空对象,方法默认为GET\r\n\theader['access-Key'] = 'Scpsmlt'\r\n\treturn new Promise((resolve,reject) => {\r\n\t\tuni.request({\r\n\t\t\turl:BASE_URL + url,\r\n\t\t\tmethod,\r\n\t\t\theader,\r\n\t\t\tdata,\r\n\t\t\tsuccess:res => {\r\n\t\t\t\tif(res.data.errCode === 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tresolve(res) //将返回的promise状态改为fulfilled并暴露结果\r\n\t\t\t\t} //如果接口调用成功\r\n\t\t\t\telse if(res.data.errCode === 400) {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle:\"错误提示\",\r\n\t\t\t\t\t\tcontent:res.data.errMsg,\r\n\t\t\t\t\t\tshowCancel:false\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// 接口调用失败\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:res.data.errMsg,\r\n\t\t\t\t\t\ticon:\"none\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\treject(res.data) //将返回的promise状态改为reject\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail:err => {\r\n\t\t\t\treject(err) //将promise状态改为reject\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n}\r\n\r\n/*该方法的作用\r\n调用会向新建一个promise对象,然后在该promise对象内部发起异步请求,\r\n当请求成功时将promise对象的状态改为fulfilled并储存响应结果,当请求失败时,\r\n将promise对象的状态改为rejected储存响应,最后再返回这个promise对象\r\n*/"],"names":["uni"],"mappings":";;AACY,MAAC,UAAU,CAAC,SAAO,OAAO;AACrC,QAAM,WAAW;AACjB,MAAI,EAAC,KAAI,SAAQ,CAAE,GAAC,SAAO,OAAM,OAAK,CAAE,EAAA,IAAI;AAC5C,SAAO,YAAY,IAAI;AACvB,SAAO,IAAI,QAAQ,CAAC,SAAQ,WAAW;AACtCA,kBAAAA,MAAI,QAAQ;AAAA,MACX,KAAI,WAAW;AAAA,MACf;AAAA,MACA;AAAA,MACA;AAAA,MACA,SAAQ,SAAO;AACd,YAAG,IAAI,KAAK,YAAY,GACxB;AACC,kBAAQ,GAAG;AAAA,QACX,WACO,IAAI,KAAK,YAAY,KAAK;AACjCA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAM;AAAA,YACN,SAAQ,IAAI,KAAK;AAAA,YACjB,YAAW;AAAA,UACjB,CAAM;AAAA,QAED,OACI;AACJA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAM,IAAI,KAAK;AAAA,YACf,MAAK;AAAA,UACX,CAAM;AACD,iBAAO,IAAI,IAAI;AAAA,QACf;AAAA,MACD;AAAA,MACD,MAAK,SAAO;AACX,eAAO,GAAG;AAAA,MACV;AAAA,IACJ,CAAG;AAAA,EACH,CAAE;AACF;;"}